<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jorge CT  - Paginas y Aplicaciones Web</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Candal&family=Dancing+Script&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./proyect.css">
</head>

<body>
    <nav>
        <h3>Jorge CT - Paginas y Aplicaciones Web</h3>
    </nav>
    <main class="container">
        <div class="grid-container" id="projects-grid"></div>
        <div id="video-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <iframe id="youtube-video" width="560" height="315" src="" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                fetch('./webAplictions/webAplications.json')
                    .then(response => response.json())
                    .then(data => {
                        const grid = document.getElementById('projects-grid');
                        const modal = document.getElementById('video-modal');
                        const youtubeVideo = document.getElementById('youtube-video');
                        const closeButton = document.querySelector('.close-button');

                        data.forEach(project => {
                            const projectCard = document.createElement('div');
                            projectCard.className = 'project-card';

                            let githubLink = '';
                            if (project.github) {
                                githubLink = `<a href="${project.github}" target="_blank">Código fuente</a>`;
                            }

                            const images = project.images.map((image, index) =>
                                `<img src="${image}" class="carousel-image ${index === 0 ? 'active' : ''}" alt="${project.title}">`
                            ).join('');

                            const features = project.features.map(feature =>
                                `<div class="feature">
                                    <img src="${feature.icon}" alt="${feature.title}">
                                    <div>
                                        <h3>${feature.title}</h3>
                                        <p>${feature.description}</p>
                                    </div>
                                </div>`
                            ).join('');

                            projectCard.innerHTML = `
                                <div class='carousel'>
                                    ${images}
                                    <button class="prev">◀</button>
                                    <button class="next">▶</button>
                                </div>
                                <div class='details'>
                                    <h2>${project.title}</h2>
                                    <p>${project.description}</p>
                                     <div class="features">
                                        ${features}
                                    </div>
                                    ${githubLink}
                                   
                                   
                                </div>
                            `;
                            /*<button class="view-details">Detalles</button>*/
                            grid.appendChild(projectCard);

                           /* projectCard.querySelector('.view-details').addEventListener('click', () => {
                                if (project.youtubeId) {
                                    youtubeVideo.src = `https://www.youtube.com/embed/${project.youtubeId}`;
                                    modal.style.display = 'flex';
                                }
                            });*/

                            const carousel = projectCard.querySelector('.carousel');
                            let currentIndex = 0;
                            const imagesList = carousel.querySelectorAll('.carousel-image');

                            const showImage = (index) => {
                                imagesList.forEach((img, i) => {
                                    img.classList.toggle('active', i === index);
                                });
                            };

                            projectCard.querySelector('.prev').addEventListener('click', () => {
                                currentIndex = (currentIndex > 0) ? currentIndex - 1 : imagesList.length - 1;
                                showImage(currentIndex);
                            });

                            projectCard.querySelector('.next').addEventListener('click', () => {
                                currentIndex = (currentIndex < imagesList.length - 1) ? currentIndex + 1 : 0;
                                showImage(currentIndex);
                            });
                        });

                        closeButton.addEventListener('click', () => {
                            modal.style.display = 'none';
                            youtubeVideo.src = '';
                        });

                        window.addEventListener('click', (event) => {
                            if (event.target === modal) {
                                modal.style.display = 'none';
                                youtubeVideo.src = '';
                            }
                        });
                    })
                    .catch(error => console.error('Error al cargar los proyectos:', error));
            });
        </script>
    </main>

</body>

</html>